<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%238b5cf6'/%3E%3Cpath d='M10 8 L10 24 M10 8 L22 8 M10 15 L18 15' stroke='white' stroke-width='2.5' stroke-linecap='round' fill='none'/%3E%3C/svg%3E" type="image/svg+xml" />
    <link rel="shortcut icon" href="./favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="FluentFlow - English Learning Platform" />
    <meta name="theme-color" content="#ffffff" id="theme-color-meta" />
    <meta name="color-scheme" content="light dark" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="manifest" href="./manifest.json" />
    <title>FluentFlow</title>
</head>

<body>
    <div id="root"></div>

    <!-- Theme initialization - prevents FOUC -->
    <script>
        (function() {
            try {
                var theme = 'light';
                var stored = localStorage.getItem('settings-storage');
                if (stored) {
                    var parsed = JSON.parse(stored);
                    if (parsed.state && parsed.state.theme) theme = parsed.state.theme;
                } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    theme = 'dark';
                }

                document.documentElement.classList.add(theme);
                document.documentElement.classList.remove(theme === 'dark' ? 'light' : 'dark');

                var meta = document.getElementById('theme-color-meta');
                if (meta) meta.setAttribute('content', theme === 'dark' ? '#1f2937' : '#ffffff');
            } catch (e) {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                }
            }
        })();
    </script>

    <script type="module" src="./src/main.tsx"></script>
</body>

</html>
